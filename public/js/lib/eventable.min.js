!function(t,e){"function"==typeof define&&define.amd?define("eventable",function(){return t.Eventable=e()}):"undefined"!=typeof exports?module.exports=e():t.Eventable=e()}(this,function(){function t(t){var e,n=2;return function(){return--n>0?e=t.apply(this,arguments):t=null,e}}function e(t,e){r[t]=function(t,n,i){var r=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=(new Date).getTime());return r[s]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}var n=[],i=n.slice,r={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(e,n,i){if(!c(this,"once",e,[n,i])||!n)return this;var r=this,s=t(function(){r.off(e,s),n.apply(this,arguments)});return s._callback=n,this.on(e,s,i)},off:function(t,e,n){var i,r,s,l,a,f,o,h;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(l=t?[t]:Object.keys(this._events),a=0,f=l.length;f>a;a++)if(t=l[a],s=this._events[t]){if(this._events[t]=i=[],e||n)for(o=0,h=s.length;h>o;o++)r=s[o],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=i.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&l(n,e),r&&l(r,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var s in i)i[s].off(e,n,this),r&&delete this._listeners[s];return this}},s=/\s+/,c=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(s.test(n)){for(var c=n.split(s),l=0,a=c.length;a>l;l++)t[e].apply(t,[c[l]].concat(i));return!1}return!0},l=function(t,e){var n,i=-1,r=t.length,s=e[0],c=e[1],l=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,c);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,c,l);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}};return e("listenTo","on"),e("listenToOnce","once"),r.bind=r.on,r.unbind=r.off,r});